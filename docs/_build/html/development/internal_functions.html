

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Internal Functions &mdash; PySD 0.10.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Complementary Projects" href="complement.html" />
    <link rel="prev" title="XMILE Translation" href="xmile_translation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> PySD
          

          
          </a>

          
            
            
              <div class="version">
                0.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic_usage.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_usage.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">User Functions Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="development_index.html">Developer Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="about.html">About the Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing to PySD</a></li>
<li class="toctree-l2"><a class="reference internal" href="pathway.html">PySD Development Pathway</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="structure.html">Structure of the PySD module</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="structure.html#translation">Translation</a></li>
<li class="toctree-l3"><a class="reference internal" href="structure.html#the-model-class">The model class</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="structure.html#the-pysd-class">The PySD class</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Internal Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="complement.html">Complementary Projects</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PySD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="development_index.html">Developer Documentation</a> &raquo;</li>
        
          <li><a href="structure.html">Structure of the PySD module</a> &raquo;</li>
        
      <li>Internal Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/development/internal_functions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="internal-functions">
<h1>Internal Functions<a class="headerlink" href="#internal-functions" title="Permalink to this headline">¶</a></h1>
<p>This section documents the functions that are going on behaind the scenes, for the benefit of developers.</p>
<div class="section" id="module-py_backend.functions">
<span id="special-functions-needed-for-model-execution"></span><h2>Special functions needed for model execution<a class="headerlink" href="#module-py_backend.functions" title="Permalink to this headline">¶</a></h2>
<p>These functions have no direct analog in the standard python data analytics
stack, or require information about the internal state of the system beyond
what is present in the function call. We provide them in a structure that
makes it easy for the model elements to call.</p>
<dl class="py class">
<dt id="py_backend.functions.Delay">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Delay</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">delay_input</span></em>, <em class="sig-param"><span class="n">delay_time</span></em>, <em class="sig-param"><span class="n">initial_value</span></em>, <em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Delay"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Delay" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Delay.ddt">
<code class="sig-name descname">ddt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Delay.ddt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Delay.ddt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Delay.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Delay.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Delay.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Initial">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Initial</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Initial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Initial" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Initial.ddt">
<code class="sig-name descname">ddt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Initial.ddt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Initial.ddt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Initial.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Initial.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Initial.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Initial.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">state</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Initial.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Initial.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Integ">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Integ</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ddt</span></em>, <em class="sig-param"><span class="n">initial_value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Integ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Integ" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Integ.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Integ.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Integ.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Integ.state">
<em class="property">property </em><code class="sig-name descname">state</code><a class="headerlink" href="#py_backend.functions.Integ.state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Macro">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Macro</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">py_model_file</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">return_func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">time_initialization</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro" title="Permalink to this definition">¶</a></dt>
<dd><p>The Model class implements a stateful representation of the system,
and contains the majority of methods for accessing and modifying model
components.</p>
<p>When the instance in question also serves as the root model object
(as opposed to a macro or submodel within another model) it will have
added methods to facilitate execution.</p>
<dl class="py method">
<dt id="py_backend.functions.Macro._constant_component">
<code class="sig-name descname">_constant_component</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro._constant_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro._constant_component" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal function for creating a constant model element</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro._timeseries_component">
<code class="sig-name descname">_timeseries_component</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">series</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro._timeseries_component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro._timeseries_component" title="Permalink to this definition">¶</a></dt>
<dd><p>Internal function for creating a timeseries model element</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.ddt">
<code class="sig-name descname">ddt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro.ddt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro.ddt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.doc">
<code class="sig-name descname">doc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro.doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro.doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a table of documentation strings to help users remember
variable names, and understand how they are translated into
python safe names.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p><strong>docs_df</strong> –</p>
<dl class="simple">
<dt>Dataframe with columns for the model components:</dt><dd><ul class="simple">
<li><p>Real names</p></li>
<li><p>Python safe identifiers (as used in model.components)</p></li>
<li><p>Units string</p></li>
<li><p>Documentation strings from the original model file</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.get_coords">
<code class="sig-name descname">get_coords</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">param</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro.get_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro.get_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the the coordinates and dims of model element if it has,
otherwise returns None
&gt;&gt;&gt; model.set_components(‘birth_rate’)
&gt;&gt;&gt; model.set_components(‘Birth Rate’)</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.get_pysd_compiler_version">
<code class="sig-name descname">get_pysd_compiler_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro.get_pysd_compiler_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro.get_pysd_compiler_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the version of pysd complier that used for generating
this model</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">initialization_order</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tries to initialize the stateful objects.</p>
<p>In the case where an initialization function for <cite>Stock A</cite> depends on
the value of <cite>Stock B</cite>, if we try to initialize <cite>Stock A</cite> before
<cite>Stock B</cite> then we will get an error, as the value will not yet exist.</p>
<p>In this case, just skip initializing <cite>Stock A</cite> for now, and
go on to the other state initializations. Then come back to it and
try again.</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.set_components">
<code class="sig-name descname">set_components</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">params</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro.set_components"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro.set_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of exogenous model elements.
Element values can be passed as keyword=value pairs in the function call.
Values can be numeric type or pandas Series.
Series will be interpolated by integrator.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">set_components</span><span class="p">({</span><span class="s1">&#39;birth_rate&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">set_components</span><span class="p">({</span><span class="s1">&#39;Birth Rate&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">br</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span> <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">set_components</span><span class="p">({</span><span class="s1">&#39;birth_rate&#39;</span><span class="p">:</span> <span class="n">br</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.set_state">
<code class="sig-name descname">set_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">state</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Macro.set_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Macro.set_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the system state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>numeric</em>) – The system time</p></li>
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – A (possibly partial) dictionary of the system state.
The keys to this dictionary may be either pysafe names or
original model file names</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Macro.state">
<em class="property">property </em><code class="sig-name descname">state</code><a class="headerlink" href="#py_backend.functions.Macro.state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Model">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Model</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">py_model_file</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Model._build_euler_timeseries">
<code class="sig-name descname">_build_euler_timeseries</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">return_timestamps</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model._build_euler_timeseries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model._build_euler_timeseries" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>The integration steps need to include the return values.</p></li>
<li><p>There is no point running the model past the last return value.</p></li>
<li><p>The last timestep will be the last in that requested for return</p></li>
<li><p>Spacing should be at maximum what is specified by the integration time step.</p></li>
<li><p>The initial time should be the one specified by the model file, OR
it should be the initial condition.</p></li>
<li><p>This function needs to be called AFTER the model is set in its initial state</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>return_timestamps</strong> (<em>numpy array</em>) – Must be specified by user or built from model file before this function is called.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ts</strong> – The times that the integrator will use to compute time history</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model._default_return_columns">
<code class="sig-name descname">_default_return_columns</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model._default_return_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model._default_return_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of the model elements that does not include lookup functions
or other functions that take parameters.</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model._euler_step">
<code class="sig-name descname">_euler_step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dt</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model._euler_step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model._euler_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a single step in the euler integration,
updating stateful components</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dt</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – This is the amount to increase time by this step</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model._format_return_timestamps">
<code class="sig-name descname">_format_return_timestamps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">return_timestamps</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model._format_return_timestamps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model._format_return_timestamps" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the passed in return timestamps value as a numpy array.
If no value is passed, build up array of timestamps based upon
model start and end times, and the ‘saveper’ value.</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model._integrate">
<code class="sig-name descname">_integrate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_steps</span></em>, <em class="sig-param"><span class="n">capture_elements</span></em>, <em class="sig-param"><span class="n">return_timestamps</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model._integrate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model._integrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs euler integration</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time_steps</strong> (<em>iterable</em>) – the time steps that the integrator progresses over</p></li>
<li><p><strong>capture_elements</strong> (<em>list</em>) – which model elements to capture - uses pysafe names</p></li>
<li><p><strong>return_timestamps</strong> – which subset of ‘timesteps’ should be values be returned?</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>outputs</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of dictionaries</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the simulation model</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model.reload">
<code class="sig-name descname">reload</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model.reload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model.reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Reloads the model from the translated model file, so that all the
parameters are back to their original value.</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model.reset_state">
<code class="sig-name descname">reset_state</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model.reset_state"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model.reset_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">return_columns</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">return_timestamps</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">initial_condition</span><span class="o">=</span><span class="default_value">'original'</span></em>, <em class="sig-param"><span class="n">reload</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate the model’s behavior over time.
Return a pandas dataframe with timestamps as rows,
model elements as columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> (<em>dictionary</em>) – Keys are strings of model component names.
Values are numeric or pandas Series.
Numeric values represent constants over the model integration.
Timeseries will be interpolated to give time-varying input.</p></li>
<li><p><strong>return_timestamps</strong> (<em>list</em><em>, </em><em>numeric</em><em>, </em><em>numpy array</em><em>(</em><em>1-D</em><em>)</em>) – Timestamps in model execution at which to return state information.
Defaults to model-file specified timesteps.</p></li>
<li><p><strong>return_columns</strong> (<em>list of string model component names</em>) – Returned dataframe will have corresponding columns.
Defaults to model stock values.</p></li>
<li><p><strong>initial_condition</strong> (<em>'original'/'o'</em><em>, </em><em>'current'/'c'</em><em>, </em><em>(</em><em>t</em><em>, </em><em>{state}</em><em>)</em>) – <p>The starting time, and the state of the system (the values of all the stocks)
at that starting time.</p>
<ul>
<li><p>’original’ (default) uses model-file specified initial condition</p></li>
<li><p>’current’ uses the state of the model after the previous execution</p></li>
<li><p>(t, {state}) lets the user specify a starting time and (possibly partial)
list of stock values.</p></li>
</ul>
</p></li>
<li><p><strong>reload</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If true, reloads the model from the translated model file before making changes</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;exogenous_constant&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;exogenous_variable&#39;</span><span class="p">:</span> <span class="n">timeseries_input</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">return_timestamps</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.1415</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">return_timestamps</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">return_timestamps</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysd.set_components</span></code></dt><dd><p>handles setting model parameters</p>
</dd>
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">pysd.set_initial_condition</span></code></dt><dd><p>handles setting initial conditions</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Model.set_initial_condition">
<code class="sig-name descname">set_initial_condition</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">initial_condition</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Model.set_initial_condition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Model.set_initial_condition" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the initial conditions of the integration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial_condition</strong> (<em>&lt;string&gt;</em><em> or </em><em>&lt;tuple&gt;</em>) – <p>Takes on one of the following sets of values:</p>
<ul>
<li><p>’original’/’o’ : Reset to the model-file specified initial condition.</p></li>
<li><p>’current’/’c’ : Use the current state of the system to start
the next simulation. This includes the simulation time, so this
initial condition must be paired with new return timestamps</p></li>
<li><p>(t, {state}) : Lets the user specify a starting time and list of stock values.</p></li>
</ul>
</p></li>
<li><p><strong>model.set_initial_condition</strong><strong>(</strong><strong>'original'</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </p></li>
<li><p><strong>model.set_initial_condition</strong><strong>(</strong><strong>'current'</strong><strong>)</strong> (<em>&gt;&gt;&gt;</em>) – </p></li>
<li><p><strong>model.set_initial_condition</strong><strong>(</strong><strong>(</strong><strong>10</strong> (<em>&gt;&gt;&gt;</em>) – </p></li>
<li><p><strong>{'teacup_temperature'</strong> (<em>50}</em><em>)</em><em>)</em>) – </p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">PySD.set_state</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Smooth">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Smooth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">smooth_input</span></em>, <em class="sig-param"><span class="n">smooth_time</span></em>, <em class="sig-param"><span class="n">initial_value</span></em>, <em class="sig-param"><span class="n">order</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Smooth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Smooth" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Smooth.ddt">
<code class="sig-name descname">ddt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Smooth.ddt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Smooth.ddt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Smooth.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Smooth.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Smooth.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Stateful">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Stateful</code><a class="reference internal" href="../_modules/py_backend/functions.html#Stateful"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Stateful" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Stateful.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Stateful.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Stateful.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Stateful.state">
<em class="property">property </em><code class="sig-name descname">state</code><a class="headerlink" href="#py_backend.functions.Stateful.state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Stateful.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">state</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Stateful.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Stateful.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Time">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Time" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Time.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Time.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Time.step" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Time.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Time.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Time.update" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.functions.Trend">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">Trend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trend_input</span></em>, <em class="sig-param"><span class="n">average_time</span></em>, <em class="sig-param"><span class="n">initial_trend</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Trend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Trend" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py_backend.functions.Trend.ddt">
<code class="sig-name descname">ddt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Trend.ddt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Trend.ddt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.functions.Trend.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#Trend.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.Trend.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.active_initial">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">active_initial</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">expr</span></em>, <em class="sig-param"><span class="n">init_val</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#active_initial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.active_initial" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements vensim’s ACTIVE INITIAL function
:param time: The current time function
:type time: function
:param expr:
:param init_val:</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.bounded_normal">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">bounded_normal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">minimum</span></em>, <em class="sig-param"><span class="n">maximum</span></em>, <em class="sig-param"><span class="n">mean</span></em>, <em class="sig-param"><span class="n">std</span></em>, <em class="sig-param"><span class="n">seed</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#bounded_normal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.bounded_normal" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements vensim’s BOUNDED NORMAL function</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.if_then_else">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">if_then_else</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">condition</span></em>, <em class="sig-param"><span class="n">val_if_true</span></em>, <em class="sig-param"><span class="n">val_if_false</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#if_then_else"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.if_then_else" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Vensim’s IF THEN ELSE function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>condition</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em> or </em><em>xarray.DataArray of bools</em>) – </p></li>
<li><p><strong>val_if_true</strong> (<em>float/bool</em><em> or </em><em>xarray.DataArray</em>) – Value to return when condition is true.</p></li>
<li><p><strong>val_if_false</strong> (<em>float/bool</em><em> or </em><em>xarray.DataArray</em>) – Value to return when condition is false.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The value depending on the condition.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.incomplete">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">incomplete</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#incomplete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.incomplete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="py_backend.functions.log">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">log</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">base</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#log"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Vensim’s LOG function with change of base</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>input value</em>) – </p></li>
<li><p><strong>base</strong> (<em>base of the logarithm</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the log of ‘x’ in base ‘base’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.lookup">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">lookup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">xs</span></em>, <em class="sig-param"><span class="n">ys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Intermediate values are calculated with linear interpolation between the intermediate points.
Out-of-range values are the same as the closest endpoint (i.e, no extrapolation is performed).</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.lookup_discrete">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">lookup_discrete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">xs</span></em>, <em class="sig-param"><span class="n">ys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#lookup_discrete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.lookup_discrete" title="Permalink to this definition">¶</a></dt>
<dd><p>Intermediate values take on the value associated with the next lower x-coordinate (also called a step-wise function). The last two points of a discrete graphical function must have the same y value.
Out-of-range values are the same as the closest endpoint (i.e, no extrapolation is performed).</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.lookup_extrapolation">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">lookup_extrapolation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">xs</span></em>, <em class="sig-param"><span class="n">ys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#lookup_extrapolation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.lookup_extrapolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Intermediate values are calculated with linear interpolation between the intermediate points.
Out-of-range values are calculated with linear extrapolation from the last two values at either end.</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.prod">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">prod</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#prod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.prod" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Vensim’s PROD function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>xarray.DataArray</em>) – Input value</p></li>
<li><p><strong>dim</strong> (<em>list of strs</em><em> (</em><em>optional</em><em>)</em>) – Dimensions to apply the function over.
If not given the function will be applied over all dimensions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the product operation in the given dimensions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.DataArray or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.pulse">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">pulse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">duration</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#pulse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.pulse" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements vensim’s PULSE function</p>
<p>In range [-inf, start) returns 0
In range [start, start + duration) returns 1
In range [start + duration, +inf] returns 0</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.pulse_magnitude">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">pulse_magnitude</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">magnitude</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">repeat_time</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#pulse_magnitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.pulse_magnitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements xmile’s PULSE function</p>
<dl>
<dt>PULSE:             Generate a one-DT wide pulse at the given time</dt><dd><dl class="simple">
<dt>Parameters:     2 or 3:  (magnitude, first time[, interval])</dt><dd><p>Without interval or when interval = 0, the PULSE is generated only once</p>
</dd>
</dl>
<p>Example:        PULSE(20, 12, 5) generates a pulse value of 20/DT at time 12, 17, 22, etc.</p>
</dd>
</dl>
<p>In rage [-inf, start) returns 0
In range [start + n * repeat_time, start + n * repeat_time + dt) return magnitude/dt
In rage [start + n * repeat_time + dt, start + (n + 1) * repeat_time) return 0</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.pulse_train">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">pulse_train</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">duration</span></em>, <em class="sig-param"><span class="n">repeat_time</span></em>, <em class="sig-param"><span class="n">end</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#pulse_train"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.pulse_train" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements vensim’s PULSE TRAIN function</p>
<p>In range [-inf, start) returns 0
In range [start + n * repeat_time, start + n * repeat_time + duration) return 1
In range [start + n * repeat_time + duration, start + (n+1) * repeat_time) return 0</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.ramp">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">ramp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">slope</span></em>, <em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">finish</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#ramp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.ramp" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements vensim’s and xmile’s RAMP function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>function</em>) – The current time of modelling</p></li>
<li><p><strong>slope</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The slope of the ramp starting at zero at time start</p></li>
<li><p><strong>start</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Time at which the ramp begins</p></li>
<li><p><strong>finish</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Optional. Time at which the ramp ends</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>response</strong> – If prior to ramp start, returns zero
If after ramp ends, returns top of ramp</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.random_uniform">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">random_uniform</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">m</span></em>, <em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">s</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#random_uniform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.random_uniform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="py_backend.functions.step">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">tstep</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.step" title="Permalink to this definition">¶</a></dt>
<dd><p>”
Implements vensim’s STEP function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The height of the step</p></li>
<li><p><strong>tstep</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The time at and after which <cite>result</cite> equals <cite>value</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>- In range [-inf, tstep) returns 0</em></p></li>
<li><ul>
<li><p>In range [tstep, +inf] returns <cite>value</cite></p></li>
</ul>
</li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.sum">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">sum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#sum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Vensim’s SUM function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>xarray.DataArray</em>) – Input value</p></li>
<li><p><strong>dim</strong> (<em>list of strs</em><em> (</em><em>optional</em><em>)</em>) – Dimensions to apply the function over.
If not given the function will be applied over all dimensions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the sum operation in the given dimensions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.DataArray or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.vmax">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">vmax</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#vmax"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.vmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Vensim’s VMAX function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>xarray.DataArray</em>) – Input value</p></li>
<li><p><strong>dim</strong> (<em>list of strs</em><em> (</em><em>optional</em><em>)</em>) – Dimensions to apply the function over.
If not given the function will be applied over all dimensions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the maximum value over the dimensions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.DataArray or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.vmin">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">vmin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">dim</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#vmin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.vmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Vensim’s Vmin function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>xarray.DataArray</em>) – Input value</p></li>
<li><p><strong>dim</strong> (<em>list of strs</em><em> (</em><em>optional</em><em>)</em>) – Dimensions to apply the function over.
If not given the function will be applied over all dimensions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the minimum value over the given dimensions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.DataArray or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.xidz">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">xidz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">numerator</span></em>, <em class="sig-param"><span class="n">denominator</span></em>, <em class="sig-param"><span class="n">value_if_denom_is_zero</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#xidz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.xidz" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Vensim’s XIDZ function.
This function executes a division, robust to denominator being zero.
In the case of zero denominator, the final argument is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>numerator</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><em>xarray.DataArray</em>) – </p></li>
<li><p><strong>denominator</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><em>xarray.DataArray</em>) – Components of the division operation</p></li>
<li><p><strong>value_if_denom_is_zero</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><em>xarray.DataArray</em>) – The value to return if the denominator is zero</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numerator / denominator if denominator &gt; 1e-6</em></p></li>
<li><p><em>otherwise, returns value_if_denom_is_zero</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.functions.zidz">
<code class="sig-prename descclassname">py_backend.functions.</code><code class="sig-name descname">zidz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">numerator</span></em>, <em class="sig-param"><span class="n">denominator</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/functions.html#zidz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.functions.zidz" title="Permalink to this definition">¶</a></dt>
<dd><p>This function bypasses divide-by-zero errors,
implementing Vensim’s ZIDZ function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>numerator</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><em>xarray.DataArray</em>) – value to be divided</p></li>
<li><p><strong>denominator</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><em>xarray.DataArray</em>) – value to devide by</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>result of division numerator/denominator if denominator is not zero,</em></p></li>
<li><p><em>otherwise zero.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-py_backend.utils"></span><p>These are general utilities used by the builder.py, functions.py or the
model file. Vensim’s function equivalents should not go here but in
functions.py</p>
<dl class="py function">
<dt id="py_backend.utils.add_entries_underscore">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">add_entries_underscore</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">dictionaries</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#add_entries_underscore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.add_entries_underscore" title="Permalink to this definition">¶</a></dt>
<dd><p>Expands dictionaries adding new keys underscoring the white spaces
in the old ones. As the dictionaries are mutable objects this functions
will add the new entries to the already existing dictionaries with
no need to return a new one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*dictionaries</strong> (<em>Dictionary</em><em> or </em><em>dictionaries</em>) – The dictionary or dictionaries to add the entries with underscore.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.compute_shape">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">compute_shape</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span></em>, <em class="sig-param"><span class="n">reshape_len</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">py_name</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#compute_shape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.compute_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the ‘shape’ of a coords dictionary.
Function used to rearange data in xarrays and
to compute the number of rows/columns to be read in a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coords</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Dictionary of the dimension names as a keys with their values.</p></li>
<li><p><strong>dims</strong> (<em>list</em>) – Ordered list of the dimensions.</p></li>
<li><p><strong>reshape_len</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> (</em><em>optional</em><em>)</em>) – Number of dimensions of the output shape.
The shape will ony compute the corresponent table
dimensions to read from Excel, then, the dimensions
with length one will be ignored at first.
Lately, it will complete with 1 on the left of the shape
if the reshape_len value is bigger than the length of shape.
Will raise a ValueError if we try to reshape to a reshape_len
smaller than the initial shape.</p></li>
<li><p><strong>py_name</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Name to print if an error is raised.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>shape</strong> – Shape of the ordered dictionary or of the desired table or vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dictionaries in Python &gt;= 3.7 are ordered, which means that
we could remove dims if there is a not backward compatible
version of the library which only works in Python 3.7+. For now,
the dimensions list is passed to make it work properly for all the users.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.dict_find">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">dict_find</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">in_dict</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#dict_find"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.dict_find" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Helper function for looking up directory keys by their values.</dt><dd><p>This isn’t robust to repeated values</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_dict</strong> (<em>dictionary</em>) – A dictionary containing <cite>value</cite></p></li>
<li><p><strong>value</strong> (<em>any type</em>) – What we wish to find in the dictionary</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>key</strong> – The key at which the value can be found</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>basestring</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dict_find</span><span class="p">({</span><span class="s1">&#39;Key1&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;Key2&#39;</span><span class="p">:</span> <span class="s1">&#39;B&#39;</span><span class="p">},</span> <span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="go">&#39;Key2&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.find_subscript_name">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">find_subscript_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subscript_dict</span></em>, <em class="sig-param"><span class="n">element</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#find_subscript_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.find_subscript_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a subscript dictionary, and a member of a subscript family,
return the first key of which the member is within the value list.
If element is already a subscript name, return that</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – Follows the {‘subscript name’:[‘list’,’of’,’subscript’,’elements’]} format</p></li>
<li><p><strong>element</strong> (<em>string</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Examples</em></p></li>
<li><p><strong>&gt;&gt;&gt; find_subscript_name({‘Dim1’</strong> (<em>[‘A’, ‘B’],</em>)</p></li>
<li><p><strong>…                      ‘Dim2’</strong> (<em>[‘C’, ‘D’, ‘E’],</em>)</p></li>
<li><p><strong>…                      ‘Dim3’</strong> (<em>[‘F’, ‘G’, ‘H’, ‘I’]},</em>)</p></li>
<li><p><em>…                      ‘D’)</em></p></li>
<li><p><em>’Dim2’</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.get_return_elements">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">get_return_elements</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">return_columns</span></em>, <em class="sig-param"><span class="n">namespace</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#get_return_elements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.get_return_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of return elements formatted in vensim’s format
Varname[Sub1, SUb2]
and returns first the model elements (in python safe language)
that need to be computed and collected, and secondly the addresses
that each element in the return columns list translates to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>return_columns</strong> (<em>list of strings</em>) – </p></li>
<li><p><strong>namespace</strong> – </p></li>
<li><p><strong>subscript_dict</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>capture_elements</em></p></li>
<li><p><em>return_addresses</em></p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.get_value_by_insensitive_key_or_value">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">get_value_by_insensitive_key_or_value</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#get_value_by_insensitive_key_or_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.get_value_by_insensitive_key_or_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="py_backend.utils.make_add_identifier">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">make_add_identifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">build_names</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#make_add_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.make_add_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an existing used Python identifier and attatch a unique
identifier with ADD_# ending.</p>
<p>Used for add new information to an existing external object.
build_names will be updated inside this functions as a set
is mutable.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> (<em>&lt;basestring&gt;</em>) – Existing python identifier</p></li>
<li><p><strong>build_names</strong> (<em>&lt;set&gt;</em>) – Set of the already used identifiers for external objects.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>identifier</strong> – A vaild python identifier based on the input indentifier
and the existing ones</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>&lt;string&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.make_coord_dict">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">make_coord_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em>, <em class="sig-param"><span class="n">terse</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#make_coord_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.make_coord_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>This is for assisting with the lookup of a particular element, such that
the output of this function would take the place of %s in this expression</p>
<p><cite>variable.loc[%s]</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subs</strong> (<em>list of strings</em>) – coordinates, either as names of dimensions, or positions within
a dimension</p></li>
<li><p><strong>subscript_dict</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – the full dictionary of subscript names and values</p></li>
<li><p><strong>terse</strong> (<em>Binary Flag</em>) – <ul>
<li><p>If true, includes only elements that do not cover the full range of
values in their respective dimension</p></li>
<li><p>If false, returns all dimensions</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>coordinates</strong> – Coordinates needed to access the xarray quantities we’re interested in.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_coord_dict</span><span class="p">([</span><span class="s1">&#39;Dim1&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;Dim1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="s1">&#39;Dim2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">]})</span>
<span class="go">{&#39;Dim2&#39;: [&#39;D&#39;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">make_coord_dict</span><span class="p">([</span><span class="s1">&#39;Dim1&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;Dim1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="s1">&#39;Dim2&#39;</span><span class="p">:[</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">]},</span>
<span class="gp">&gt;&gt;&gt; </span>                <span class="n">terse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">{&#39;Dim2&#39;: [&#39;D&#39;], &#39;Dim1&#39;: [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.make_flat_df">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">make_flat_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frames</span></em>, <em class="sig-param"><span class="n">return_addresses</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#make_flat_df"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.make_flat_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of dictionaries, each representing what is returned from the
model at a particular time, and creates a dataframe whose columns
correspond to the keys of <cite>return addresses</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>list of dictionaries</em>) – each dictionary represents the result of a prticular time in the model</p></li>
<li><p><strong>return_addresses</strong> (<em>a dictionary</em><em>,</em>) – keys will be column names of the resulting dataframe, and are what the
user passed in as ‘return_columns’. Values are a tuple:
(py_name, {coords dictionary}) which tells us where to look for the
value to put in that specific column.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.make_python_identifier">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">make_python_identifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">namespace</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">reserved_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">convert</span><span class="o">=</span><span class="default_value">'drop'</span></em>, <em class="sig-param"><span class="n">handle</span><span class="o">=</span><span class="default_value">'force'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#make_python_identifier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.make_python_identifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an arbitrary string and creates a valid Python identifier.</p>
<p>If the input string is in the namespace, return its value.</p>
<p>If the python identifier created is already in the namespace,
but the input string is not (ie, two similar strings resolve to
the same python identifier)</p>
<p>or if the identifier is a reserved word in the reserved_words
list, or is a python default reserved word,
adds _1, or if _1 is in the namespace, _2, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> (<em>&lt;basestring&gt;</em>) – The text to be converted into a valid python identifier</p></li>
<li><p><strong>namespace</strong> (<em>&lt;dictionary&gt;</em>) – Map of existing translations into python safe identifiers.
This is to ensure that two strings are not translated into
the same python identifier</p></li>
<li><p><strong>reserved_words</strong> (<em>&lt;list of strings&gt;</em>) – List of words that are reserved (because they have other meanings
in this particular program, such as also being the names of
libraries, etc.</p></li>
<li><p><strong>convert</strong> (<em>&lt;string&gt;</em>) – <p>Tells the function what to do with characters that are not
valid in python identifiers
- ‘hex’ implies that they will be converted to their hexidecimal</p>
<blockquote>
<div><p>representation. This is handy if you have variables that
have a lot of reserved characters, or you don’t want the
name to be dependent on when things were added to the
namespace</p>
</div></blockquote>
<ul>
<li><p>’drop’ implies that they will just be dropped altogether</p></li>
</ul>
</p></li>
<li><p><strong>handle</strong> (<em>&lt;string&gt;</em>) – <p>Tells the function how to deal with namespace conflicts
- ‘force’ will create a representation which is not in conflict</p>
<blockquote>
<div><p>by appending _n to the resulting variable where n is
the lowest number necessary to avoid a conflict</p>
</div></blockquote>
<ul>
<li><p>’throw’ will raise an exception</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>identifier</strong> (<em>&lt;string&gt;</em>) – A vaild python identifier based on the input string</p></li>
<li><p><strong>namespace</strong> (<em>&lt;dictionary&gt;</em>) – An updated map of the translations of words to python identifiers,
including the passed in ‘string’.</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_python_identifier</span><span class="p">(</span><span class="s1">&#39;Capital&#39;</span><span class="p">)</span>
<span class="go">(&#39;capital&#39;, {&#39;Capital&#39;: &#39;capital&#39;})</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_python_identifier</span><span class="p">(</span><span class="s1">&#39;multiple words&#39;</span><span class="p">)</span>
<span class="go">(&#39;multiple_words&#39;, {&#39;multiple words&#39;: &#39;multiple_words&#39;})</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_python_identifier</span><span class="p">(</span><span class="s1">&#39;multiple     spaces&#39;</span><span class="p">)</span>
<span class="go">(&#39;multiple_spaces&#39;, {&#39;multiple     spaces&#39;: &#39;multiple_spaces&#39;})</span>
</pre></div>
</div>
<p>When the name is a python keyword, add ‘_1’ to differentiate it
&gt;&gt;&gt; make_python_identifier(‘for’)
(‘for_1’, {‘for’: ‘for_1’})</p>
<p>Remove leading and trailing whitespace
&gt;&gt;&gt; make_python_identifier(‘  whitespace  ‘)
(‘whitespace’, {‘  whitespace  ‘: ‘whitespace’})</p>
<p>Remove most special characters outright:
&gt;&gt;&gt; make_python_identifier(‘H&#64;t tr!ck’)
(‘ht_trck’, {‘H&#64;t tr!ck’: ‘ht_trck’})</p>
<p>Replace special characters with their hex representations
&gt;&gt;&gt; make_python_identifier(‘H&#64;t tr!ck’, convert=’hex’)
(‘h40t_tr21ck’, {‘H&#64;t tr!ck’: ‘h40t_tr21ck’})</p>
<p>remove leading digits
&gt;&gt;&gt; make_python_identifier(‘123abc’)
(‘abc’, {‘123abc’: ‘abc’})</p>
<p>already in namespace
&gt;&gt;&gt; make_python_identifier(‘Variable$’, namespace={‘Variable$’: ‘variable’})
(‘variable’, {‘Variable$’: ‘variable’})</p>
<p>namespace conflicts
&gt;&gt;&gt; make_python_identifier(‘Variable$’, namespace={‘Variable&#64;’: ‘variable’})
(‘variable_1’, {‘Variable&#64;’: ‘variable’, ‘Variable$’: ‘variable_1’})</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_python_identifier</span><span class="p">(</span><span class="s1">&#39;Variable$&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Variable@&#39;</span><span class="p">:</span> <span class="s1">&#39;variable&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                               <span class="s1">&#39;Variable%&#39;</span><span class="p">:</span> <span class="s1">&#39;variable_1&#39;</span><span class="p">})</span>
<span class="go">(&#39;variable_2&#39;, {&#39;Variable@&#39;: &#39;variable&#39;, &#39;Variable%&#39;: &#39;variable_1&#39;, &#39;Variable$&#39;: &#39;variable_2&#39;})</span>
</pre></div>
</div>
<p>throw exception instead
&gt;&gt;&gt; make_python_identifier(‘Variable$’, namespace={‘Variable&#64;’: ‘variable’}, handle=’throw’)
Traceback (most recent call last):</p>
<blockquote>
<div><p>…</p>
</div></blockquote>
<p>NameError: variable already exists in namespace or is a reserved word</p>
<p class="rubric">References</p>
<dl class="simple">
<dt>Identifiers must follow the convention outlined here:</dt><dd><p><a class="reference external" href="https://docs.python.org/2/reference/lexical_analysis.html#identifiers">https://docs.python.org/2/reference/lexical_analysis.html#identifiers</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.rearrange">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">rearrange</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">dims</span></em>, <em class="sig-param"><span class="n">coords</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#rearrange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.rearrange" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a xarray.DataArray object with the given coords and dims</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><em>xarray.DataArray</em>) – The input data to rearrange.</p></li>
<li><p><strong>dims</strong> (<em>list</em>) – Ordered list of the dimensions.</p></li>
<li><p><strong>coords</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Dictionary of the dimension names as a keys with their values.</p></li>
<li><p><strong>switch</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Flag to denote if the dimensions can be switched. Default True,
The False is used to rearrange general expressions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.DataArray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.round">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">round</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#round"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.round" title="Permalink to this definition">¶</a></dt>
<dd><p>Redefinition of round function with try except</p>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.visit_addresses">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">visit_addresses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frame</span></em>, <em class="sig-param"><span class="n">return_addresses</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#visit_addresses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.visit_addresses" title="Permalink to this definition">¶</a></dt>
<dd><p>Visits all of the addresses, returns a new dict
which contains just the addressed elements</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> – </p></li>
<li><p><strong>return_addresses</strong> (<em>a dictionary</em><em>,</em>) – keys will be column names of the resulting dataframe, and are what the
user passed in as ‘return_columns’. Values are a tuple:
(py_name, {coords dictionary}) which tells us where to look for the
value to put in that specific column.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>outdict</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dictionary</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.utils.xrmerge">
<code class="sig-prename descclassname">py_backend.utils.</code><code class="sig-name descname">xrmerge</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">das</span></em>, <em class="sig-param"><span class="n">accept_new</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/utils.html#xrmerge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.utils.xrmerge" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges xarrays with different dimension sets
:param das:
:type das: list of data_arrays
:param accept_new:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>da</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>an xarray that is the merge of das</p>
</dd>
</dl>
<p class="rubric">References</p>
<p>Thanks to &#64;jcmgray <a class="reference external" href="https://github.com/pydata/xarray/issues/742#issue-130753818">https://github.com/pydata/xarray/issues/742#issue-130753818</a></p>
<p>In the future, we may not need this as xarray may provide the merge for us.</p>
</dd></dl>

</div>
<div class="section" id="module-py_backend.builder">
<span id="building-the-python-model-file"></span><h2>Building the python model file<a class="headerlink" href="#module-py_backend.builder" title="Permalink to this headline">¶</a></h2>
<p>These elements are used by the translator to construct the model from the
interpreted results. It is technically possible to use these functions to
build a model from scratch. But - it would be rather error prone.</p>
<p>This is code to assemble a pysd model once all of the elements have
been translated from their native language into python compatible syntax.
There should be nothing here that has to know about either vensim or
xmile specific syntax.</p>
<dl class="py function">
<dt id="py_backend.builder.add_ext_constant">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_ext_constant</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_ext_constant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_ext_constant" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a external object for handling Vensim’s GET XLS CONSTANT and
GET DIRECT CONSTANT functionality</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>basestring</em>) – the python-safe name of the external values</p></li>
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – filepath to the data</p></li>
<li><p><strong>tab</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – tab where the data is</p></li>
<li><p><strong>cell</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – cell identifier where the data starts</p></li>
<li><p><strong>subs</strong> (<em>list of strings</em>) – List of strings of subscript indices that correspond to the
list of expressions, and collectively define the shape of the output</p></li>
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – Dictionary describing the possible dimensions of the stock’s subscripts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the ExtConstant object <cite>__call__</cite> method,
which will return the read value of the data</p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_ext_data">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_ext_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">time_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em>, <em class="sig-param"><span class="n">keyword</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_ext_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_ext_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a external object for handling Vensim’s GET XLS DATA and
GET DIRECT DATA functionality</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>basestring</em>) – the python-safe name of the external values</p></li>
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – filepath to the data</p></li>
<li><p><strong>tab</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – tab where the data is</p></li>
<li><p><strong>time_row_or_col</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – identifier to the starting point of the time dimension</p></li>
<li><p><strong>cell</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – cell identifier where the data starts</p></li>
<li><p><strong>subs</strong> (<em>list of strings</em>) – List of strings of subscript indices that correspond to the
list of expressions, and collectively define the shape of the output</p></li>
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – Dictionary describing the possible dimensions of the stock’s subscripts</p></li>
<li><p><strong>keyword</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Data retrieval method (‘interpolate’, ‘look forward’, ‘hold backward’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the ExtData object <cite>__call__</cite> method,
which will return the retrieved value of data for the current time step</p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_ext_lookup">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_ext_lookup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">x_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_ext_lookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_ext_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a external object for handling Vensim’s GET XLS LOOKUPS and
GET DIRECT LOOKUPS functionality</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>basestring</em>) – the python-safe name of the external values</p></li>
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – filepath to the data</p></li>
<li><p><strong>tab</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – tab where the data is</p></li>
<li><p><strong>x_row_or_col</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – identifier to the starting point of the lookup dimension</p></li>
<li><p><strong>cell</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – cell identifier where the data starts</p></li>
<li><p><strong>subs</strong> (<em>list of strings</em>) – List of strings of subscript indices that correspond to the
list of expressions, and collectively define the shape of the output</p></li>
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – Dictionary describing the possible dimensions of the stock’s subscripts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the ExtLookup object <cite>__call__</cite> method,
which will return the retrieved value of data after interpolating it</p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_incomplete">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_incomplete</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">var_name</span></em>, <em class="sig-param"><span class="n">dependencies</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_incomplete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_incomplete" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Incomplete functions don’t really need to be ‘builders’ as they</dt><dd><p>add no new real structure, but it’s helpful to have a function
in which we can raise a warning about the incomplete equation
at translate time.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_initial">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_initial</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">initial_input</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_initial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_initial" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a stateful object for handling vensim’s ‘Initial’ functionality</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>initial_input</strong> (<em>basestring</em>) – The expression which will be evaluated, and the first value of
which returned</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the Initial object <cite>__call__</cite> method,
which will return the first calculated value of <cite>initial_input</cite></p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_macro">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_macro</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">macro_name</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">arg_names</span></em>, <em class="sig-param"><span class="n">arg_vals</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_macro"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_macro" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a stateful object instantiating a ‘Macro’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>macro_name</strong> (<em>basestring</em>) – python safe name for macro</p></li>
<li><p><strong>filename</strong> (<em>basestring</em>) – filepath to macro definition</p></li>
<li><p><strong>func_args</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – dictionary of values to be passed to macro
{key: function}</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the Initial object <cite>__call__</cite> method,
which will return the first calculated value of <cite>initial_input</cite></p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_n_delay">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_n_delay</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">delay_input</span></em>, <em class="sig-param"><span class="n">delay_time</span></em>, <em class="sig-param"><span class="n">initial_value</span></em>, <em class="sig-param"><span class="n">order</span></em>, <em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_n_delay"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_n_delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates code to instantiate a stateful ‘Delay’ object,
and provides reference to that object’s output.</p>
<p>The name of the stateful object is based upon the passed in parameters,
so if there are multiple places where identical delay functions are
referenced, the translated python file will only maintain one stateful
object, and reference it multiple times.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>basestring</em>) – the python-safe name of the stock</p></li>
<li><p><strong>delay_input</strong> (<em>&lt;string&gt;</em>) – Reference to the model component that is the input to the delay</p></li>
<li><p><strong>delay_time</strong> (<em>&lt;string&gt;</em>) – Can be a number (in string format) or a reference to another model
element which will calculate the delay. This is calculated throughout
the simulation at runtime.</p></li>
<li><p><strong>initial_value</strong> (<em>&lt;string&gt;</em>) – This is used to initialize the stocks that are present in the delay.
We initialize the stocks with equal values so that the outflow in
the first timestep is equal to this value.</p></li>
<li><p><strong>order</strong> (<em>string</em>) – The number of stocks in the delay pipeline. As we construct the
delays at build time, this must be an integer and cannot be calculated
from other model components. Anything else will yield a ValueError.</p></li>
<li><p><strong>subs</strong> (<em>list of strings</em>) – List of strings of subscript indices that correspond to the
list of expressions, and collectively define the shape of the output</p></li>
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – Dictionary describing the possible dimensions of the stock’s subscripts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the delay object <cite>__call__</cite> method, which will return
the output of the delay process</p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_n_smooth">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_n_smooth</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">smooth_input</span></em>, <em class="sig-param"><span class="n">smooth_time</span></em>, <em class="sig-param"><span class="n">initial_value</span></em>, <em class="sig-param"><span class="n">order</span></em>, <em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_n_smooth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_n_smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs stock and flow chains that implement the calculation of
a smoothing function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>basestring</em>) – the python-safe name of the stock</p></li>
<li><p><strong>smooth_input</strong> (<em>&lt;string&gt;</em>) – Reference to the model component that is the input to the
smoothing function</p></li>
<li><p><strong>smooth_time</strong> (<em>&lt;string&gt;</em>) – Can be a number (in string format) or a reference to another model
element which will calculate the delay. This is calculated throughout
the simulation at runtime.</p></li>
<li><p><strong>initial_value</strong> (<em>&lt;string&gt;</em>) – This is used to initialize the stocks that are present in the delay.
We initialize the stocks with equal values so that the outflow in
the first timestep is equal to this value.</p></li>
<li><p><strong>order</strong> (<em>string</em>) – The number of stocks in the delay pipeline. As we construct the delays
at build time, this must be an integer and cannot be calculated from
other model components. Anything else will yield a ValueError.</p></li>
<li><p><strong>subs</strong> (<em>list of strings</em>) – List of strings of subscript indices that correspond to the
list of expressions, and collectively define the shape of the output</p></li>
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – Dictionary describing the possible dimensions of the stock’s subscripts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the smooth object <cite>__call__</cite> method, which will return
the output of the smooth process</p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_n_trend">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_n_trend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">trend_input</span></em>, <em class="sig-param"><span class="n">average_time</span></em>, <em class="sig-param"><span class="n">initial_trend</span></em>, <em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_n_trend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_n_trend" title="Permalink to this definition">¶</a></dt>
<dd><p>Trend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>basestring</em>) – the python-safe name of the stock</p></li>
<li><p><strong>trend_input</strong> (<em>&lt;string&gt;</em>) – </p></li>
<li><p><strong>average_time</strong> (<em>&lt;string&gt;</em>) – </p></li>
</ul>
</dd>
</dl>
<p>trend_initial: &lt;string&gt;</p>
<dl class="simple">
<dt>subs: list of strings</dt><dd><p>List of strings of subscript indices that correspond to the
list of expressions, and collectively define the shape of the output</p>
</dd>
<dt>subscript_dict: dictionary</dt><dd><p>Dictionary describing the possible dimensions of the stock’s subscripts</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>basestring</em>) – reference to the trend object <cite>__call__</cite> method, which will return the
output of the trend process</p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of element construction dictionaries for the builder to assemble</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.add_stock">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">add_stock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">identifier</span></em>, <em class="sig-param"><span class="n">expression</span></em>, <em class="sig-param"><span class="n">initial_condition</span></em>, <em class="sig-param"><span class="n">subs</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#add_stock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.add_stock" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates new model element dictionaries for the model elements associated
with a stock.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifier</strong> (<em>basestring</em>) – the python-safe name of the stock</p></li>
<li><p><strong>expression</strong> (<em>basestring</em>) – The formula which forms the derivative of the stock</p></li>
<li><p><strong>initial_condition</strong> (<em>basestring</em>) – Formula which forms the initial condition for the stock</p></li>
<li><p><strong>subs</strong> (<em>list of strings</em>) – List of strings of subscript indices that correspond to the
list of expressions, and collectively define the shape of the output</p></li>
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – Dictionary describing the possible dimensions of the stock’s subscripts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>reference</strong> (<em>string</em>) – a string to use in place of the ‘INTEG…’ pieces in the element
expression string, a reference to the stateful object</p></li>
<li><p><strong>new_structure</strong> (<em>list</em>) – list of additional model element dictionaries. When there are
subscripts, constructs an external ‘init’ and ‘ddt’ function so
that these can be appropriately aggregated</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.build">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">build</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">elements</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em>, <em class="sig-param"><span class="n">namespace</span></em>, <em class="sig-param"><span class="n">outfile_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Actually constructs and writes the python representation of the model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elements</strong> (<em>list</em>) – Each element is a dictionary, with the various components needed to assemble
a model component in python syntax. This will contain multiple entries for
elements that have multiple definitions in the original file, and which need
to be combined.</p></li>
<li><p><strong>subscript_dict</strong> (<em>dictionary</em>) – A dictionary containing the names of subscript families (dimensions) as keys, and
a list of the possible positions within that dimension for each value</p></li>
<li><p><strong>namespace</strong> (<em>dictionary</em>) – Translation from original model element names (keys) to python safe
function identifiers (values)</p></li>
<li><p><strong>outfile_name</strong> (<em>string</em>) – The name of the file to write the model to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.build_element">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">build_element</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element</span></em>, <em class="sig-param"><span class="n">subscript_dict</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#build_element"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.build_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string that has processed a single element dictionary
:param element: dictionary containing at least the elements:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>kind: [‘constant’, ‘setup’, ‘component’, ‘lookup’]</dt><dd><p>Different types of elements will be built differently</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>py_expr: string</dt><dd><p>An expression that has been converted already into python syntax</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>subs: list of lists</dt><dd><p>Each sublist contains coordinates for initialization of a particular
part of a subscripted function, the list of subscripts vensim attaches to an equation</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>subscript_dict</strong> (<em>dictionary</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.build_function_call">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">build_function_call</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function_def</span></em>, <em class="sig-param"><span class="n">user_arguments</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#build_function_call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.build_function_call" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function_def</strong> (<em>function definition map with following keys</em>) – <ul>
<li><p>name: name of the function</p></li>
<li><dl>
<dt>parameters: list with description of all parameters of this function</dt><dd><ul class="simple">
<li><p>name</p></li>
<li><p>optional?</p></li>
<li><dl class="simple">
<dt>type: [</dt><dd><dl class="simple">
<dt>“expression”, - provide converted expression as parameter for</dt><dd><p>runtime evaluating before the method call</p>
</dd>
<dt>”lambda”,     - provide lambda expression as parameter for</dt><dd><p>delayed runtime evaluation in the method call</p>
</dd>
<dt>”time”,       - provide access to current instance of</dt><dd><p>time object</p>
</dd>
<dt>”scope”       - provide access to current instance of</dt><dd><p>scope object (instance of Macro object)</p>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
<p>]</p>
</dd>
</dl>
</li>
</ul>
</p></li>
<li><p><strong>user_arguments</strong> (<em>list of arguments provided from model</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py_backend.builder.merge_partial_elements">
<code class="sig-prename descclassname">py_backend.builder.</code><code class="sig-name descname">merge_partial_elements</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_list</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/builder.html#merge_partial_elements"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.builder.merge_partial_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>merges model elements which collectively all define the model component,
mostly for multidimensional subscripts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>element_list</strong> – </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-py_backend.external">
<span id="external-data-reading"></span><h2>External data reading<a class="headerlink" href="#module-py_backend.external" title="Permalink to this headline">¶</a></h2>
<p>These classes are a collection of the needed tools to read external data.
The External type objects created by these classes are initialized before
the Stateful objects by functions.Model.initialize.</p>
<dl class="py class">
<dt id="py_backend.external.Excels">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.external.</code><code class="sig-name descname">Excels</code><a class="reference internal" href="../_modules/py_backend/external.html#Excels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.Excels" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to save the read Excel files and thus avoid double reading</p>
<dl class="py attribute">
<dt id="py_backend.external.Excels._Excels">
<code class="sig-name descname">_Excels</code><em class="property"> = {}</em><a class="headerlink" href="#py_backend.external.Excels._Excels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="py_backend.external.Excels._Excels_opyxl">
<code class="sig-name descname">_Excels_opyxl</code><em class="property"> = {}</em><a class="headerlink" href="#py_backend.external.Excels._Excels_opyxl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.external.Excels.clean">
<em class="property">classmethod </em><code class="sig-name descname">clean</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#Excels.clean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.Excels.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean the dictionary of read files</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.Excels.read">
<em class="property">classmethod </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#Excels.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.Excels.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the Excel file or return the previously read one</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.Excels.read_opyxl">
<em class="property">classmethod </em><code class="sig-name descname">read_opyxl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#Excels.read_opyxl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.Excels.read_opyxl" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the Excel file using OpenPyXL or return the previously read one</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.external.ExtConstant">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.external.</code><code class="sig-name descname">ExtConstant</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span></em>, <em class="sig-param"><span class="n">root</span></em>, <em class="sig-param"><span class="n">py_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtConstant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtConstant" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for Vensim GET XLS CONSTANTS/GET DIRECT CONSTANTS</p>
<dl class="py method">
<dt id="py_backend.external.ExtConstant._get_constant_data">
<code class="sig-name descname">_get_constant_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_across</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">shape</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtConstant._get_constant_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtConstant._get_constant_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Function thar reads data from excel file for CONSTANT</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_across</strong> (<em>&quot;cell&quot;</em><em> or </em><em>&quot;name&quot;</em>) – The way to read data file.</p></li>
<li><p><strong>cell</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – If data_across is “cell” the lefttop split cell value where
the data is.
If data_across is “name” the cell range name where the data is.</p></li>
<li><p><strong>shape</strong> – The shape of the data in 2D.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – The values of the data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float/ndarray(1D/2D)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.ExtConstant._initialize">
<code class="sig-name descname">_initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtConstant._initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtConstant._initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize one element</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.ExtConstant.add">
<code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtConstant.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtConstant.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information to retrieve new dimension in an already declared object</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.ExtConstant.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtConstant.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtConstant.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize all elements and create the self.data xarray.DataArray</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.external.ExtData">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.external.</code><code class="sig-name descname">ExtData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">time_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">interp</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span></em>, <em class="sig-param"><span class="n">root</span></em>, <em class="sig-param"><span class="n">py_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtData" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for Vensim GET XLS DATA/GET DIRECT DATA</p>
<dl class="py method">
<dt id="py_backend.external.ExtData.add">
<code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">time_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">interp</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtData.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtData.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information to retrieve new dimension in an already declared object</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.ExtData.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtData.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtData.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize all elements and create the self.data xarray.DataArray</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.external.ExtLookup">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.external.</code><code class="sig-name descname">ExtLookup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">x_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span></em>, <em class="sig-param"><span class="n">root</span></em>, <em class="sig-param"><span class="n">py_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtLookup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for Vensim GET XLS LOOKUPS/GET DIRECT LOOKUPS</p>
<dl class="py method">
<dt id="py_backend.external.ExtLookup.add">
<code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">x_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">coords</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtLookup.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtLookup.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add information to retrieve new dimension in an already declared object</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.ExtLookup.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtLookup.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtLookup.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize all elements and create the self.data xarray.DataArray</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py_backend.external.ExtSubscript">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.external.</code><code class="sig-name descname">ExtSubscript</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">tab</span></em>, <em class="sig-param"><span class="n">firstcell</span></em>, <em class="sig-param"><span class="n">lastcell</span></em>, <em class="sig-param"><span class="n">prefix</span></em>, <em class="sig-param"><span class="n">root</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#ExtSubscript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.ExtSubscript" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for Vensim GET XLS SUBSCRIPT/GET DIRECT SUBSCRIPT</p>
</dd></dl>

<dl class="py class">
<dt id="py_backend.external.External">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.external.</code><code class="sig-name descname">External</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">py_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External" title="Permalink to this definition">¶</a></dt>
<dd><p>Main class of external objects</p>
<dl class="py method">
<dt id="py_backend.external.External._col_to_num">
<em class="property">static </em><code class="sig-name descname">_col_to_num</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._col_to_num"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._col_to_num" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the column name to int</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>col</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Column name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Column number</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)">int</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._file_sheet">
<em class="property">property </em><code class="sig-name descname">_file_sheet</code><a class="headerlink" href="#py_backend.external.External._file_sheet" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns file and sheet name in a string</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._get_data_from_file">
<code class="sig-name descname">_get_data_from_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rows</span></em>, <em class="sig-param"><span class="n">cols</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._get_data_from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._get_data_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to read data from excel file using rows and columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em>, </em><em>list</em><em> or </em><em>array</em>) – if int, then will start reading the table for the given row number
if list, then will read between first and second row of the lis
if array, then will read the given row numbers</p></li>
<li><p><strong>cols</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a><em>, </em><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em>, </em><em>list</em><em> or </em><em>array</em>) – <dl class="simple">
<dt>if None, then will continue reading until no more data is</dt><dd><p>available in the new column</p>
</dd>
</dl>
<p>if str, then will read only the given column by its name
if list, then will read between the given columns
if array, then will read the given columns names/numbers</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – depending on the shape of the requested data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame, pandas.Series or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._get_data_from_file_opyxl">
<code class="sig-name descname">_get_data_from_file_opyxl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cellname</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._get_data_from_file_opyxl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._get_data_from_file_opyxl" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to read data from excel file using cell range name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cellname</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – the cell range name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – depending on the shape of the requested data</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray or <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._get_series_data">
<code class="sig-name descname">_get_series_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">series_across</span></em>, <em class="sig-param"><span class="n">series_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em>, <em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._get_series_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._get_series_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Function thar reads series and data from excel file for
DATA and LOOKUPS.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series_across</strong> (<em>&quot;row&quot;</em><em>, </em><em>&quot;column&quot;</em><em> or </em><em>&quot;name&quot;</em>) – The way to read series file.</p></li>
<li><p><strong>series_row_or_col</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – <p>If series_across is “row” the row number where the series data is.
If series_across is “column” the column name where</p>
<blockquote>
<div><p>the series data is.</p>
</div></blockquote>
<dl class="simple">
<dt>If series_across is “name” the cell range name where</dt><dd><p>the series data is.</p>
</dd>
</dl>
</p></li>
<li><p><strong>cell</strong> – <dl class="simple">
<dt>If series_across is not “name, the top left cell where</dt><dd><p>the data table starts.</p>
</dd>
</dl>
<p>Else the name of the cell range where the data is.</p>
</p></li>
<li><p><strong>size</strong> – The size of the 2nd dimension of the data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>series, data</strong> – The values of the series and data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray (1D), ndarray(1D/2D)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._initialize_data">
<code class="sig-name descname">_initialize_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dim_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._initialize_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._initialize_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize one element of DATA or LOOKUPS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dim_name</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Dimension name.
“lookup_dim” for LOOKUPS, “time” for DATA.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>data</strong> – Dataarray with the time or interpolation dimension
as first dimension.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.DataArray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._num_to_col">
<em class="property">static </em><code class="sig-name descname">_num_to_col</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">num</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._num_to_col"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._num_to_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms the column number to name. Also working with lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>col_v</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><em>list of ints</em>) – Column number(s)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Column name(s)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int/list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._reshape">
<em class="property">static </em><code class="sig-name descname">_reshape</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">dims</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._reshape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._reshape" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshapes an pandas.DataFrame, pandas.Series, xarray.DataArray
or np.ndarray in the given dimensions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>xarray.DataArray/numpy.ndarray</em>) – Data to be reshaped</p></li>
<li><p><strong>dims</strong> (<em>tuple</em>) – The dimensions to reshape.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>reshaped array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._resolve_file">
<code class="sig-name descname">_resolve_file</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">root</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">possible_ext</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._resolve_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._resolve_file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._series_selector">
<em class="property">classmethod </em><code class="sig-name descname">_series_selector</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x_row_or_col</span></em>, <em class="sig-param"><span class="n">cell</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._series_selector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._series_selector" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects if a series data (DATA/LOOKUPS), should be read by columns,
rows or cellrange name.
Based on the input format of x_row_or_col and cell.
The format of the 2 variables must be consistent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_row_or_col</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – String of a number if series is given in a row, letter if series is
given in a column or name if the series is given by cellrange name.</p></li>
<li><p><strong>cell</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Cell identificator, such as “A1”, or name if the data is given
by cellrange name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>series_across</strong> – “row” if series is given in a row
“column” if series is given in a column
“name” if series and data are given by range name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.external.External._split_excel_cell">
<em class="property">static </em><code class="sig-name descname">_split_excel_cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cell</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/external.html#External._split_excel_cell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.external.External._split_excel_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a cell value given in a string.
Returns None for non-valid cell formats.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cell</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Cell like string, such as “A1”, “b16”, “AC19”…
If it is not a cell like string will return None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>row number, column name</strong> – If the cell input is valid.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)">int</a>, <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)">str</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-py_backend.decorators">
<span id="decorators-used-in-the-model-file"></span><h2>Decorators used in the model file<a class="headerlink" href="#module-py_backend.decorators" title="Permalink to this headline">¶</a></h2>
<p>These are the decorators used by the functions in the model file.
functions.py</p>
<dl class="py class">
<dt id="py_backend.decorators.Cache">
<em class="property">class </em><code class="sig-prename descclassname">py_backend.decorators.</code><code class="sig-name descname">Cache</code><a class="reference internal" href="../_modules/py_backend/decorators.html#Cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.decorators.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the class for the chache. Several cache types can be saved
in dictionaries and acces using cache.data[cache_type].</p>
<dl class="py method">
<dt id="py_backend.decorators.Cache.clean">
<code class="sig-name descname">clean</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">horizon</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/decorators.html#Cache.clean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.decorators.Cache.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleans the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>horizon</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a><em> or </em><em>list of str</em><em> (</em><em>optional</em><em>)</em>) – Name(s) of the cache(s) to clean.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.decorators.Cache.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/decorators.html#Cache.reset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.decorators.Cache.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the time to the given one and cleans the step cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – The time to be set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="py_backend.decorators.Cache.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/decorators.html#Cache.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.decorators.Cache.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for caching at a run level</p>
</dd></dl>

<dl class="py method">
<dt id="py_backend.decorators.Cache.step">
<code class="sig-name descname">step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/decorators.html#Cache.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.decorators.Cache.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator for caching at a step level</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="py_backend.decorators.subs">
<code class="sig-prename descclassname">py_backend.decorators.</code><code class="sig-name descname">subs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dims</span></em>, <em class="sig-param"><span class="n">subcoords</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/py_backend/decorators.html#subs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py_backend.decorators.subs" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorators returns the python object with the correct dimensions
xarray.DataArray. The algorithm is a simple version of utils.rearrange</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="complement.html" class="btn btn-neutral float-right" title="Complementary Projects" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="xmile_translation.html" class="btn btn-neutral float-left" title="XMILE Translation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2016, James Houghton

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>